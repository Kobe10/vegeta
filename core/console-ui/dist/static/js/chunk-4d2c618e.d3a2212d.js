(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d2c618e"],{"3aa3":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{staticStyle:{"margin-top":"20px","margin-left":"5px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:3}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v("问题类型")])]),t._v(" "),i("div",{staticStyle:{"min-height":"700px",height:"auto"}},[i("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn green-btn",on:{click:function(e){return t.addRadio("mot","yes")}}},[t._v("\n                mot\n              ")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn green-btn",on:{click:function(e){return t.addRadio("nps","yes")}}},[t._v("\n                nps\n              ")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn green-btn",on:{click:function(e){return t.addRadio("tag","yes")}}},[t._v("\n                标签\n              ")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn green-btn",on:{click:function(e){return t.addRadio("mainStar","yes")}}},[t._v("\n                主星星\n              ")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn green-btn",on:{click:function(e){return t.addRadio("secondaryStar","yes")}}},[t._v("\n                子星星\n              ")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn yellow-btn",on:{click:function(e){return t.addRadio("text","no")}}},[t._v("\n                文本题\n              ")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[i("el-col",{staticClass:"text-center",attrs:{span:6}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn yellow-btn",on:{click:function(e){return t.addRadio("file","no")}}},[t._v("\n                文件题\n              ")])],1)],1)],1)])],1),t._v(" "),i("el-col",{attrs:{span:13}},[i("el-card",{staticClass:"box-card",staticStyle:{height:"800px","overflow-y":"scroll"}},[i("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v("问题编辑板块")])]),t._v(" "),i("div",{staticStyle:{"min-height":"710px",height:"auto"}},[i("el-row",[i("el-form",{ref:"template",staticStyle:{"margin-top":"5px"},attrs:{model:t.template,rules:t.templateRules,"label-width":"120px"}},[i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"模板标题",prop:"templateName"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"600px"},attrs:{placeholder:"模板标题",disabled:t.templateDisable},model:{value:t.template.templateName,callback:function(e){t.$set(t.template,"templateName",e)},expression:"template.templateName"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"模板说明"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"600px"},attrs:{type:"textarea",placeholder:"模板说明",disabled:t.templateDisable},model:{value:t.template.templateDesc,callback:function(e){t.$set(t.template,"templateDesc",e)},expression:"template.templateDesc"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"适用场景:",prop:"sceneCode"}},[i("el-col",{attrs:{span:8}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{disabled:t.isEdit,placeholder:"请选择",clearable:"",size:"small"},model:{value:t.template.sceneCode,callback:function(e){t.$set(t.template,"sceneCode",e)},expression:"template.sceneCode"}},t._l(t.sceneCodes,function(t){return i("el-option",{key:t.value,attrs:{label:t.lable,value:t.value}})}),1)],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"被评对象:",prop:"beEvaluatedObjectType"}},[i("el-col",{attrs:{span:8}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{disabled:t.isEdit,placeholder:"请选择",clearable:"",size:"small"},model:{value:t.template.beEvaluatedObjectType,callback:function(e){t.$set(t.template,"beEvaluatedObjectType",e)},expression:"template.beEvaluatedObjectType"}},t._l(t.beEvaluatedObjectTypes,function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.value}})}),1)],1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"适用城市"}},[i("el-checkbox-group",{attrs:{size:"small"},model:{value:t.template.cityCodes,callback:function(e){t.$set(t.template,"cityCodes",e)},expression:"template.cityCodes"}},t._l(t.cityCodes,function(e){return i("el-checkbox-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.lable))])}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"适用产品(长租)"}},[i("el-checkbox-group",{attrs:{size:"small"},model:{value:t.template.productCodes,callback:function(e){t.$set(t.template,"productCodes",e)},expression:"template.productCodes"}},t._l(t.productCodes,function(e){return i("el-checkbox-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.lable))])}),1)],1),t._v(" "),i("el-form-item",[t.isEdit?i("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{disabled:t.templateDisable,type:"primary"},on:{click:t.updateTemplateDetail}},[t._v("完成编辑")]):t._e(),t._v(" "),t.isEdit?i("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{disabled:!t.templateDisable,type:"primary"},on:{click:function(e){t.templateDisable=!1}}},[t._v("编辑模板")]):t._e()],1)],1)],1),t._v(" "),null!==t.questionList&&t.questionList.length>0?i("el-row",{staticStyle:{overflow:"auto"},attrs:{"infinite-scroll-disabled":""}},t._l(t.questionList,function(e){return i("div",{key:e.questionIndex},[i("Radio",{staticStyle:{"margin-top":"8px"},attrs:{"question-detail":e,"question-list":t.questionList,"question-types":t.questionTypes,"is-edit":t.isEdit,template:t.template,"is-disable":t.isDisable,"question-scene-types":t.questionSceneTypes},on:{"update:questionDetail":function(t){e=t},"update:question-detail":function(t){e=t},"update:questionList":function(e){t.questionList=e},"update:question-list":function(e){t.questionList=e}}})],1)}),0):t._e(),t._v(" "),t.isEdit?t._e():i("el-button",{directives:[{name:"clickButton",rawName:"v-clickButton",value:500,expression:"500"}],staticStyle:{float:"right","margin-top":"20px","margin-right":"10px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.saveTemplate(e)}}},[t._v("保存模板")]),t._v(" "),t.isEdit?t._e():i("el-button",{staticStyle:{float:"right","margin-top":"20px","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.onCancel}},[t._v("取消")]),t._v(" "),t.isEdit?i("el-button",{staticStyle:{float:"right","margin-top":"20px","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.cancelEditTemplate}},[t._v("取消编辑")]):t._e()],1)])],1),t._v(" "),i("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:7}},[i("el-card",{staticClass:"box-card",staticStyle:{"max-height":"800px","overflow-y":"scroll"}},[i("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v("规则设置")]),t._v(" "),t.isSetRandom?t._e():i("span",[i("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary",hidden:""},on:{click:t.showSetRandom}},[t._v("设置随机")])],1),t._v(" "),t.isSetRandom?i("span",[i("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary",hidden:""},on:{click:t.setQuestionRandom}},[t._v("完成设置")])],1):t._e(),t._v(" "),t.isSetRandom?i("span",[i("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary",hidden:""},on:{click:t.cancleSelect}},[t._v("取消设置")])],1):t._e()]),t._v(" "),i("div",{staticClass:"component-item"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.questionHandleList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[t.isSetRandom?i("el-table-column",{attrs:{type:"selection",width:"42"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{label:"问题名称",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.questionLabel))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"问题权重",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{size:"mini",type:"number"},model:{value:e.row.questionWeight,callback:function(i){t.$set(e.row,"questionWeight",i)},expression:"scope.row.questionWeight"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("button",{on:{click:function(i){return t.moveQuestionUp(e.$index)}}},[t._v("上移")]),t._v(" "),i("button",{on:{click:function(i){return t.moveQuestionDown(e.$index)}}},[t._v("下移")]),t._v(" "),i("el-popover",{ref:"popover-"+e.row.questionCode,attrs:{placement:"top",width:"10",trigger:"manual"}},[i("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(i){return t.pOpen(e.row.questionCode)}},slot:"reference"},[t._v("删除")]),t._v(" "),i("p",[t._v("确定删除当前问题吗?")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"10px"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.pCancel(e.row.questionCode)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.handleDeleteQuestion(e.$index,e.row)}}},[t._v("确定")])],1)],1)]}}])})],1)],1),t._v(" "),i("div",[i("span",[i("el-button",{staticStyle:{float:"bottom","margin-bottom":"100px"},attrs:{size:"primary",type:"primary",hidden:""},on:{click:t.saveQuestionIndex}},[t._v("保存顺序")])],1)])]),t._v(" "),i("el-dialog",{attrs:{title:"设置随机问题个数",visible:t.questionRandomDialogFormVisible,"before-close":t.cancelRandom,width:"30%"},on:{"update:visible":function(e){t.questionRandomDialogFormVisible=e}}},[i("el-form",{ref:"questionRandomForm",staticStyle:{"min-width":"200px",width:"auto","margin-left":"50px","min-height":"200px",height:"auto"},attrs:{model:t.questionRandom,"label-position":"left","label-width":"200px"}},[i("el-form-item",{attrs:{label:"随机出现问题个数",prop:"randomNum"}},[i("el-input-number",{attrs:{min:1,max:t.randomQuestionList.length-1},model:{value:t.questionRandom.randomNum,callback:function(e){t.$set(t.questionRandom,"randomNum",e)},expression:"questionRandom.randomNum"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelRandom}},[t._v("\n            取消\n          ")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveQuestionRandom}},[t._v("\n            保存\n          ")])],1)],1)],1)],1)],1)},a=[],n=(i("96cf"),i("3b8d")),o=(i("55dd"),i("ac6a"),i("6724")),l=i("ce45"),r=i("53d1"),u=i("66af"),c=i("c621"),d=[{key:"1",display_name:"管家",value:"KEEPER"},{key:"0",display_name:"房子",value:"HOUSE"}],p=[{key:"star",display_name:"星星",value:"star"},{key:"text",display_name:"文本",value:"text"},{key:"multimedia",display_name:"多媒体",value:"multimedia"},{key:"nps",display_name:"nps",value:"nps"},{key:"radio",display_name:"单选",value:"radio"},{key:"tag",display_name:"标签",value:"tag"}],m=[{key:"mot",display_name:"mot",value:"mot"},{key:"nps",display_name:"nps",value:"nps"},{key:"tag",display_name:"标签",value:"tag"},{key:"mainStar",display_name:"主星星",value:"mainStar"},{key:"secondaryStar",display_name:"子星星",value:"secondaryStar"},{key:"file",display_name:"文件",value:"file"},{key:"text",display_name:"文本",value:"text"}],h={name:"SaveTemplate",components:{Radio:r["a"]},directives:{waves:o["a"],clickButton:l["a"]},data:function(){return{isEdit:!1,isDisable:!1,templateDisable:!1,listLoading:!0,template:{sceneCode:"",templateCode:"",templateName:"",templateDesc:"",beEvaluatedObjectType:"",cityCodes:[],productCodes:[],questionList:[],templateType:0},question:{questionCode:null,questionLabel:null,questionType:null,questionSceneType:null,isRequire:null,questionDesc:null,questionIndex:null,answerList:[],optionBox:null,questionWeight:null,isEdit:!1,questionLinkQuestion:{},isComplete:!1,isCopy:!1,isAddOption:!1},answer:{answerCode:null,answerLabel:null,answerDesc:null,answerScore:null,answerIndex:null},questionLinkRel:{questionCode:null,parentOptionCode:[],parentQuestionCode:null},questionIndexWeightList:[],questionIndexWeightReqTemp:{sceneCode:null,templateCode:null,questionIndexWeightList:[],beEvaluatedObjectType:null},sceneCodes:[],questionList:[],questionHandleList:[],cityCodes:[],productCodes:[],beEvaluatedObjectTypes:d,questionTypes:p,questionSceneTypes:m,questionIsEditComplete:[],templateRules:{templateName:[{required:!0,message:"问题标题不能为空",trigger:"blur"},{min:2,message:"模板名称长度大于两个字",trigger:"blur"},{max:15,message:"模板名称长度在15个字以内",trigger:"blur"}],sceneCode:[{required:!0,message:"必须选择",trigger:"blur"}],beEvaluatedObjectType:[{required:!0,message:"必须选择",trigger:"blur"}]},randomQuestionList:[],isSetRandom:!1,questionRandomDialogFormVisible:!1,questionRandom:{randomNum:null}}},computed:{},watch:{"question.questionLabel":function(){},isEdit:function(){},questionList:{handler:function(t,e){var i=this;this.questionHandleList=[],t.forEach(function(t){t.isComplete&&i.questionHandleList.push(t)})}}},created:function(){this.getJumpParams(),this.getCityList(),this.getProductList(),this.getSceneList(),this.getIdCode("templateType")},methods:{sortByKey:function(t,e){return t.sort(function(t,i){var s=t[e],a=i[e];return s<a?-1:s>a?1:0}),t},getJumpParams:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,i,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isEdit=this.$route.params.isEdit,this.isDisable=this.$route.params.isDisable,!this.$route.params.isCopy){t.next=12;break}if(this.isEdit=this.$route.params.isEdit,this.templateDisable=!1,e=this.$route.params.templateCode,void 0===e&&null===e){t.next=11;break}return t.next=9,Object(c["d"])(e,"2").then(function(t){if("success"===t.status){s.template=t.data;var e=s.template.templateName;s.$set(s.template,"templateName",e+"-copy"),s.template.questionList.forEach(function(t){var e=Object.assign({},t);s.questionDisable=!1,e.questionLinkQuestion={},s.$set(e,"isComplete",!1),s.$set(e,"isEdit",!1),s.$set(e,"isCopy",!0),null!==t.answerList&&t.answerList.length>0?s.$set(e,"optionBox","yes"):s.$set(e,"optionBox","no"),s.questionList.push(e)})}else s.$notify({title:"复制模板失败",message:t.message,type:"error",duration:3e3})});case 9:t.next=12;break;case 11:this.$notify({title:"复制模板失败",message:"当前模板不存在",type:"error",duration:3e3});case 12:if(!this.isEdit){t.next=22;break}if(void 0!==this.template.templateCode&&localStorage.setItem("editTemplate_templateCode",this.$route.params.templateCode),this.isEdit=this.$route.params.isEdit,this.templateDisable=!0,i=this.$route.params.templateCode,null!==i&&void 0!==i||(i=localStorage.setItem("editTemplate_templateCode")),void 0===i&&null===i){t.next=22;break}return this.template.templateCode=i,t.next=22,Object(c["d"])(i,"1").then(function(t){"success"===t.status?(s.template=t.data,s.template.questionList.forEach(function(t){s.question=Object.assign({},t),s.$set(s.question,"isEdit",!0),s.$set(s.question,"isComplete",!0),null!==t.answerList&&t.answerList.length>0?s.$set(s.question,"optionBox","yes"):s.$set(s.question,"optionBox","no"),s.questionList.push(s.question),s.questionHandleList.push(s.question),s.question={}})):s.$notify({title:"Fail",message:t.message,type:"error",duration:5e3})});case 22:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getIdCode:function(t){var e=this;this.isEdit||Object(u["d"])(t).then(function(i){null!=i.data&&"templateType"===t&&e.$set(e.template,"templateCode",i.data)})},addRadio:function(t,e){this.resetQuestionOption(t,e);var i=Object.assign({},this.question);this.$set(i,"questionIndex",this.questionList.length),this.isEdit&&this.$set(i,"isAddOption",!0),this.questionList.push(i)},saveTemplate:function(t){var e=this,i=this.$loading({lock:!0,text:"保存模板中，请稍等",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.3)",target:".sub-main",body:!0,customClass:"mask"});this.$refs["template"].validate(function(t){if(t){e.listLoading=!0;var s=!0;if(e.questionList.forEach(function(t){t.isComplete||(s=!1)}),!s)return e.$notify({title:"Fail",message:"存在未保存的问题，请将所有问题保存",type:"error",duration:5e3}),void i.close();s?(e.template.questionList=e.questionList.slice(0,e.questionList.length),e.questionHandleList=e.questionList.slice(0,e.questionList.length),Object(c["k"])(e.template).then(function(t){"success"===t.status?(e.listLoading=!1,e.isEdit=!0,e.templateDisable=!0,e.isDisable=!0,e.questionList.forEach(function(t){e.$set(t,"isEdit",!0),e.$set(t,"questionDisable",!0)}),i.close(),e.$notify({title:"Success",message:"新增模板成功",type:"success",duration:2e3}).then({})):e.$notify({title:"Fail",message:"保存失败",type:"error",duration:5e3})}).catch(function(){i.close()})):i.close()}else i.close()}),setTimeout(function(){i.close()},5e3)},resetQuestionOption:function(t,e){this.question.optionBox=e,this.question.isEdit=!1,this.question.questionSceneType=t},getSceneList:function(){var t=this;this.listLoading=!0,Object(u["g"])().then(function(e){var i=[];e.data.forEach(function(t){i.push({value:t.sceneCode,lable:t.sceneName})}),t.sceneCodes=i,t.listLoading=!1}).catch(function(){t.listLoading=!1})},getCityList:function(){var t=this;this.listLoading=!0,Object(u["c"])().then(function(e){var i=[];e.forEach(function(t){i.push({value:t.cityCode,lable:t.cityName})}),t.cityCodes=i,t.listLoading=!1}).catch(function(){t.listLoading=!1})},getProductList:function(){var t=this;this.listLoading=!0,Object(u["f"])().then(function(e){var i=[];e.data.forEach(function(t){i.push({value:t.productCode,lable:t.productName})}),t.productCodes=i,t.listLoading=!1}).catch(function(){t.listLoading=!1})},onCancel:function(){this.$router.push({name:"templateList"})},cancelEditTemplate:function(){this.$router.push({name:"templateList"})},setQuestionRandom:function(){var t=this;this.randomQuestionList.length<2?this.$notify({title:"fail",message:"选中问题小于两个，无法设置随机问题",type:"warning",duration:3e3}):(this.questionRandomDialogFormVisible=!0,this.$nextTick(function(){t.$refs["questionRandomForm"].clearValidate()}))},saveQuestionIndex:function(){var t=this;this.listLoading=!0;var e=this.questionHandleList.slice(0,this.questionHandleList.length),i=[];e.forEach(function(t){var e={questionCode:t.questionCode,questionWeight:t.questionWeight,index:t.questionIndex};i.push(e)}),0!==i.length?(this.questionIndexWeightReqTemp={sceneCode:this.template.sceneCode,templateCode:this.template.templateCode,questionIndexWeightList:i,beEvaluatedObjectType:this.template.beEvaluatedObjectType},Object(c["e"])(this.questionIndexWeightReqTemp).then(function(e){"success"===e.status?t.$notify({title:"Success",message:"设置成功",type:"success",duration:3e3}):t.$notify({title:"Fail",message:"设置失败",type:"error",duration:3e3})}).catch(function(){t.listLoading=!1})):this.$notify({title:"Fail",message:"存在未保存的问题，请将所有问题保存",type:"error",duration:5e3})},saveQuestionRandom:function(){var t=this;this.$refs["template"].validate(function(e){e&&t.$refs["questionRandomForm"].validate(function(e){if(e){if(t.questionRandom.randomNum<0||t.questionRandom.randomNum>=t.randomQuestionList.length)return void t.$notify({title:"fail",message:"随机数量不满足要求",type:"warning",duration:3e3});var i=[];t.randomQuestionList.forEach(function(t){i.push(t.questionCode)});var s={templateCode:t.template.templateCode,sceneCode:t.template.sceneCode,questionShowCount:t.questionRandom.randomNum,questionShowStrategy:"",questionCodeList:i};Object(c["j"])(s).then(function(e){"success"===e.status?(t.questionRandomDialogFormVisible=!1,t.$notify({title:"Success",message:"设置随机问题成功",type:"success",duration:3e3})):(t.questionRandomDialogFormVisible=!1,t.$notify({title:"Fail",message:e.message,type:"error",duration:3e3})),t.isSetRandom=!1})}})})},cancelRandom:function(){this.questionRandomDialogFormVisible=!1,this.questionRandom.randomNum=null,this.$refs.multipleTable.clearSelection()},cancleSelect:function(){this.isSetRandom=!1,this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.randomQuestionList=t},showSetRandom:function(){this.isSetRandom=!0},moveQuestionUp:function(t){if(this.questionHandleList.length>1&&0!==t){this.$set(this.questionList[t],"questionIndex",t-1),this.$set(this.questionList[t-1],"questionIndex",t);var e=this.questionList.slice(0,this.questionList.length),i=Object.assign({},e[t-1]);this.$set(e,t-1,e[t]),this.$set(e,t,i),this.questionList=e.slice(0,e.length)}else this.$message({message:"第一个无法向上移动",type:"warning"})},moveQuestionDown:function(t){if(this.questionHandleList.length>1&&t!==this.questionHandleList.length-1){this.$set(this.questionList[t],"questionIndex",t+1),this.$set(this.questionList[t+1],"questionIndex",t);var e=this.questionList.slice(0,this.questionList.length),i=Object.assign({},e[t+1]);this.$set(e,t+1,e[t]),this.$set(e,t,i),this.questionList=e.slice(0,e.length)}else this.$message({message:"最后一个无法向下移动",type:"warning"})},handleDeleteQuestion:function(t,e){var i=this;this.pClose(e.questionCode);var s=Object.assign({},this.template);s.questionList=[],s.questionList.push(e),Object(c["b"])(s).then(function(e){if("success"===e.status){var s=i.questionList.slice(0,i.questionList.length);s.splice(t,1);for(var a=0;a<s.length;a++)i.$set(s[a],"questionIndex",a);i.questionList=s.slice(0,s.length),i.saveQuestionIndex(),i.$notify({title:"Success",message:"删除问题成功",type:"success",duration:2e3})}else i.$notify({title:"Fail",message:e.message,type:"error",duration:5e3})})},pCancel:function(t){this.pClose(t)},pClose:function(t){this.$refs["popover-"+t].doClose()},pOpen:function(t){this.$refs["popover-"+t].doShow()},updateTemplateDetail:function(){var t=this;this.$refs["template"].validate(function(e){if(e){if(t.templateDisable)return void t.$message({message:"当前状态无法编辑模板",type:"warning"});t.listLoading=!0;var i=t.template;t.$delete(i,"questionList"),Object(c["m"])(i).then(function(e){"success"===e.status?(t.templateDisable=!0,t.$notify({title:"Success",message:"更新模板成功",type:"success",duration:2e3})):t.$notify({title:"Fail",message:"更新失败",type:"error",duration:5e3})}).catch(function(){t.listLoading=!1})}})}}},v=h,f=(i("e216"),i("2877")),g=Object(f["a"])(v,s,a,!1,null,"4b701ee0",null);e["default"]=g.exports},cd34:function(t,e,i){},e216:function(t,e,i){"use strict";var s=i("cd34"),a=i.n(s);a.a}}]);