(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9221d03a"],{"25ea":function(e,t,a){"use strict";var n=a("d996"),i=a.n(n);i.a},"66af":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"f",function(){return l}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"g",function(){return u});var n=a("b775");function i(){return Object(n["a"])({url:"/general/biz/list",method:"get"})}function l(e){return Object(n["a"])({url:"/general/product/list",method:"get",params:e})}function r(){return Object(n["a"])({url:"/general/city/list",method:"get"})}function s(e){return Object(n["a"])({url:"/general/center/list",method:"get",params:{cityCode:e}})}function o(e){return Object(n["a"])({url:"/general/get/code",method:"get",params:{idCodeType:e}})}function c(e){return Object(n["a"])({url:"/general/org/list",method:"get",params:{parentCode:e}})}function u(){return Object(n["a"])({url:"/scene/findAllScene",method:"get"})}},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function i(e,t){function a(a){var n=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var r=l.getBoundingClientRect(),s=l.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(r.width,r.height)+"px",l.appendChild(s)),i.type){case"center":s.style.top=r.height/2-s.offsetHeight/2+"px",s.style.left=r.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-r.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-r.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var l={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},r=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(r)),l.install=r;t["a"]=l},"8d41":function(e,t,a){},c621:function(e,t,a){"use strict";a.d(t,"g",function(){return i}),a.d(t,"h",function(){return l}),a.d(t,"n",function(){return r}),a.d(t,"f",function(){return s}),a.d(t,"a",function(){return o}),a.d(t,"k",function(){return c}),a.d(t,"j",function(){return u}),a.d(t,"d",function(){return d}),a.d(t,"m",function(){return p}),a.d(t,"l",function(){return m}),a.d(t,"i",function(){return f}),a.d(t,"c",function(){return h}),a.d(t,"b",function(){return g}),a.d(t,"e",function(){return y});var n=a("b775");function i(e){return Object(n["a"])({url:"/template/valid/list",method:"get",params:{sceneCode:e}})}function l(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/page/list",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function r(e){return Object(n["a"])({url:"/template/valid",method:"get",params:{templateCode:e}})}function s(e){return Object(n["a"])({url:"/template/invalid",method:"get",params:{templateCode:e}})}function o(e,t){return Object(n["a"])({url:"/template/default",method:"get",params:{templateCode:e,sceneCode:t}})}function c(e){var t=JSON.stringify(e);return console.log(t),Object(n["a"])({url:"/template/add",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function u(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/save/random/question",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function d(e,t){return Object(n["a"])({url:"/template/detail/"+e+"/"+t,method:"get"})}function p(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/update/template",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function m(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/update/question",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function f(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/save/question",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function h(e){return Object(n["a"])({url:"/template/delete/template/"+e,method:"get"})}function g(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/delete/question",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function y(e){var t=JSON.stringify(e);return Object(n["a"])({url:"/template/set/question/indexAndWeight",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}},d996:function(e,t,a){},da5e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{model:e.listQuery,"label-width":"20px","label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px",label:"业务线:"}},[a("el-select",{staticClass:"filter-item",staticStyle:{"max-width":"150px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.listQuery.lineCode,callback:function(t){e.$set(e.listQuery,"lineCode",t)},expression:"listQuery.lineCode"}},e._l(e.bizLines,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px",label:"模板名称:"}},[a("el-input",{staticClass:"filter-item",staticStyle:{"max-width":"200px"},attrs:{placeholder:"模板名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.templateName,callback:function(t){e.$set(e.listQuery,"templateName",t)},expression:"listQuery.templateName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px",label:"适用场景:"}},[a("el-select",{staticClass:"filter-item",staticStyle:{"max-width":"150px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.listQuery.sceneCode,callback:function(t){e.$set(e.listQuery,"sceneCode",t)},expression:"listQuery.sceneCode"}},e._l(e.sceneCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px",label:"状态:"}},[a("el-select",{staticClass:"filter-item",staticStyle:{"max-width":"130px"},attrs:{placeholder:"是否有效",clearable:""},model:{value:e.listQuery.templateStatus,callback:function(t){e.$set(e.listQuery,"templateStatus",t)},expression:"listQuery.templateStatus"}},e._l(e.calendarTypeOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px",label:"适用城市:"}},[a("el-select",{staticClass:"filter-item",staticStyle:{"max-width":"150px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.listQuery.cityCode,callback:function(t){e.$set(e.listQuery,"cityCode",t)},expression:"listQuery.cityCode"}},e._l(e.cityCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px",label:"适用产品:"}},[a("el-select",{staticClass:"filter-item",staticStyle:{"max-width":"150px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.listQuery.productCode,callback:function(t){e.$set(e.listQuery,"productCode",t)},expression:"listQuery.productCode"}},e._l(e.productCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.addTemplate}},[e._v("\n        新增模板\n      ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getTemplateList}},[e._v("\n        查询\n      ")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板名称",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#1482f0"},attrs:{href:"javascript:void (0)"},on:{click:function(a){return e.updateTemplate(t.row.templateCode)}}},[a("span",[e._v(e._s(t.row.templateName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"适用场景","max-width":"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sceneName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"业务线","max-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lineName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"适用城市","max-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cityCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"适用产品","max-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.productCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","max-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.templateStatus))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否默认","max-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.isDefault))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后修改人","max-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lastModifyId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后修改时间",align:"center","max-width":"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lastModifyTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.previewTemplate(t.row.templateCode)}}},[e._v("\n          预览\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updateTemplate(t.row.templateCode)}}},[e._v("\n          修改\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.copyTemplate(t.row.templateCode)}}},[e._v("\n          复制\n        ")]),e._v(" "),"废弃"===t.row.templateStatus||"初始化"===t.row.templateStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleValidTemplate(t.row,t.row.templateCode)}}},[e._v("\n          启用\n        ")]):e._e(),e._v(" "),"启用"===t.row.templateStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleInValidTemplate(t.row,t.row.templateCode)}}},[e._v("\n          禁用\n        ")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDeleteTemplate(t.row.templateCode)}}},[e._v("\n          删除\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDefaultTemplate(t.row.templateCode,t.row.sceneCode)}}},[e._v("\n          默认\n        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"projects-data-footer"},[a("el-pagination",{attrs:{total:e.pageInfo.totalRecord,"page-size":e.pageInfo.pageSize,"current-page":e.pageInfo.currentPage,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],l=(a("96cf"),a("3b8d")),r=(a("ac6a"),a("c621")),s=a("66af"),o=a("6724"),c=a("ed08"),u=[{key:"0",display_name:"初始化",value:0},{key:"1",display_name:"启用",value:1},{key:"2",display_name:"废弃",value:2}],d=u.reduce(function(e,t){return e[t.key]=t.display_name,e},{}),p={name:"TemplateList",components:{},directives:{waves:o["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]},typeFilter:function(e){return d[e]}},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,listQuery:{pageNum:1,pageSize:10,lineCode:"",templateName:"",sceneCode:"",templateStatus:"",cityCode:"",productCode:""},bizLines:[],sceneCodes:[],cityCodes:[],productCodes:[],templateCodes:[],calendarTypeOptions:u,templateStatusOptions:["初始化","启用","废弃"],showReviewer:!1,textMap:{update:"Edit",create:"Create"},pageInfo:{totalRecord:0,currentPage:1,pageSize:10}}},created:function(){this.getLines(),this.getCityList(),this.getProductList(),this.getSceneList()},mounted:function(){this.getTemplateList()},methods:{getLines:function(){var e=this;this.listLoading=!0,Object(s["a"])().then(function(t){var a=[];t.data.forEach(function(e){a.push({value:e.bizLineCode,lable:e.bizLineName})}),e.bizLines=a,e.listLoading=!1}).catch(function(){e.listLoading=!1})},getSceneList:function(){var e=this;this.listLoading=!0,Object(s["g"])().then(function(t){var a=[];t.data.forEach(function(e){a.push({value:e.sceneCode,lable:e.sceneName})}),e.sceneCodes=a,e.listLoading=!1}).catch(function(){e.listLoading=!1})},getCityList:function(){var e=this;this.listLoading=!0,Object(s["c"])().then(function(t){var a=[];t.forEach(function(e){a.push({value:e.cityCode,lable:e.cityName})}),e.cityCodes=a,e.listLoading=!1}).catch(function(){e.listLoading=!1})},getProductList:function(){var e=this;this.listLoading=!0,Object(s["f"])().then(function(t){var a=[];t.data.forEach(function(e){a.push({value:e.productCode,lable:e.productName})}),e.productCodes=a,e.listLoading=!1}).catch(function(){e.listLoading=!1})},getTemplateList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageInfo.currentPage,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageInfo.pageSize;this.listLoading=!0,"number"===typeof t&&(this.listQuery.pageNum=t),null!=a&&(this.listQuery.pageSize=a),Object(r["h"])(this.listQuery).then(function(t){e.list=t.data.list,e.$set(e.pageInfo,"totalRecord",t.data.total),e.$set(e.pageInfo,"currentPage",t.data.pageNum),e.listLoading=!1}).catch(function(){e.listLoading=!1})},handleDeleteTemplate:function(e){var t=this;this.$confirm("你确认删除这个模板吗","Warning",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(r["c"])(e).then(function(e){t.$message({type:"success",message:"删除成功！"}),t.getTemplateList(1,t.listQuery.pageSize)});case 2:case"end":return a.stop()}},a)})))},handleDefaultTemplate:function(e,t){var a=this;this.$confirm("确认设置当前模板为默认模板吗","Warning",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(r["a"])(e,t).then(function(e){a.$message({type:"success",message:"设置成功！"}),a.getTemplateList(1,a.listQuery.pageSize)});case 2:case"end":return n.stop()}},n)}))).catch(function(e){console.error(e)})},handleValidTemplate:function(e,t){var a=this;Object(r["n"])(t).then(function(t){"success"===t.status?(a.$message({message:t.message,type:"success"}),e.templateStatus=a.templateStatusOptions[1]):a.$message({message:"启用失败",type:"false"})})},handleInValidTemplate:function(e,t){var a=this;Object(r["f"])(t).then(function(t){"success"===t.status?(a.$message({message:t.message,type:"success"}),e.templateStatus=a.templateStatusOptions[2]):a.$message({message:"禁用失败",type:"false"})})},copyTemplate:function(e){this.$router.push({name:"CopyTemplate",params:{templateCode:e,isEdit:!1,isDisable:!1,isCopy:!0}})},previewTemplate:function(e){alert("开发中")},handleFilter:function(){this.listQuery.page=1,this.getTemplateList()},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?Object(c["d"])(t[e]):t[e]})})},handleSizeChange:function(e){this.$set(this.listQuery,"pageSize",e),this.listQuery.pageSize=e,this.getTemplateList(1,e)},handleCurrentChange:function(e){this.getTemplateList(e,this.listQuery.pageSize)},addTemplate:function(){this.$router.push({name:"SaveTemplate",params:{isEdit:!1}})},updateTemplate:function(e){this.$router.push({name:"EditTemplate",params:{templateCode:e,isEdit:!0,isDisable:!0,isCopy:!1}})}}},m=p,f=(a("25ea"),a("2877")),h=Object(f["a"])(m,n,i,!1,null,"66a4ff2a",null);t["default"]=h.exports}}]);